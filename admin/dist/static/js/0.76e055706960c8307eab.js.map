{"version":3,"sources":["webpack:///src/components/common/Read.vue","webpack:///./src/components/common/Read.vue?2412","webpack:///./src/components/common/Read.vue"],"names":["Read","props","boxShadow","type","Boolean","default","getValue","Function","navigation","toolbarsFlag","defaultOpen","String","editable","status","article_id","toolbars","Object","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","readmodel","htmlcode","help","undo","redo","save","alignleft","aligncenter","alignright","subfield","preview","data","value","articles","info","watch","val","_this","this","api","getArticleById","then","res","catch","e","console","log","mounted","_this2","$route","params","replace","$emit","computed","methods","$imgAdd","pos","$file","_this3","uploadArticleImg","extends_default","_name","activated","_this4","length","common_Read","render","_vm","_h","$createElement","_self","_c","staticClass","attrs","on","imgAdd","model","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.76e055706960c8307eab.js","sourcesContent":["<template>\n    <mavon-editor \n        v-model=\"value\" \n        :toolbarsFlag=\"toolbarsFlag\" \n        :defaultOpen=\"defaultOpen\" \n        :editable=\"editable\" \n        :subfield=\"false\" \n        :navigation=\"navigation\" \n        :toolbars=\"toolbars\"\n        @imgAdd=\"$imgAdd\"\n        :boxShadow=\"boxShadow\"\n        class=\"readStyle\"/>\n</template>\n<script>\nimport api from '../../api/index.js'\nimport {mapState} from 'vuex'\nexport default {\n    props:{\n        boxShadow: {\n            type: Boolean,\n            default: false\n        },\n        getValue: {\n            type: Function\n        },\n        navigation: {\n            type: Boolean,\n            default: true\n        },\n        toolbarsFlag: {\n            type: Boolean,\n            default: false\n        },\n        defaultOpen: {\n            type: String,\n            default: 'preview'\n        },\n        editable: {\n            type: Boolean,\n            default: false\n        },\n        status: {\n            type: String,\n            default: 'readArticle'\n        },\n        article_id: {\n            type: String,\n        },\n        toolbars: {\n            type: Object,\n            default: function () {\n                return {\n                    bold: true, // 粗体\n                    italic: true, // 斜体\n                    header: true, // 标题\n                    underline: true, // 下划线\n                    strikethrough: true, // 中划线\n                    mark: true, // 标记\n                    superscript: true, // 上角标\n                    subscript: true, // 下角标\n                    quote: true, // 引用\n                    ol: true, // 有序列表\n                    ul: true, // 无序列表\n                    link: true, // 链接\n                    imagelink: true, // 图片链接\n                    code: true, // code\n                    table: true, // 表格\n                    readmodel: true, // 沉浸式阅读\n                    htmlcode: true, // 展示html源码\n                    help: true, // 帮助\n                    /* 1.3.5 */\n                    undo: true, // 上一步\n                    redo: true, // 下一步\n                    save: true, // 保存（触发events中的save事件）\n                    /* 1.4.2 */\n                    navigation: true, // 导航目录\n                    /* 2.1.8 */\n                    alignleft: true, // 左对齐\n                    aligncenter: true, // 居中\n                    alignright: true, // 右对齐\n                    /* 2.2.1 */\n                    subfield: true, // 单双栏模式\n                    preview: true, // 预览\n                }\n            },\n        }\n    },\n    data () {\n        return {\n            value: '',\n            articles: {},\n            info: {},\n        }\n    },\n    watch: {\n        article_id (val) {\n            if (this.status === 'updateArticle') {\n                api.getArticleById({article_id: this.article_id})\n                    .then(res => {\n                        if (res.code) {\n                            this.value = res.data\n                        }\n                    })\n                    .catch(e => {\n                        console.log(e)\n                    })           \n            }\n        },\n        value (val) {\n            this.getValue ? this.getValue (val) : null\n        }\n    },\n    mounted () {\n        if (this.status === 'updateArticle') {\n            api.getArticleById({article_id: this.article_id})\n                .then(res => {\n                    if (res.code) {\n                        this.value = res.data\n                    }\n                })\n                .catch(e => {\n                    console.log(e)\n                })           \n        }\n        if (this.status === 'read') {\n            api.getArticleById({article_id: this.$route.params.article_id})\n                .then(res => {\n                    if (res.code) {\n                        let val = res.data.replace(/#.+\\n/, '')\n                        this.value = val\n                        this.articles[this.$route.params.article_id] = val\n                        this.info[this.$route.params.article_id] = res.info\n                        this.$emit('getArticle', res.info)\n                    }\n                })\n                .catch(e => {\n                    console.log(e)\n                })            \n        }\n\n    },\n    computed: {\n    },\n    methods: {\n        $imgAdd(pos, $file){\n            api.uploadArticleImg({...$file})\n                .then(res => {\n                    if (res.code) {\n                        this.value = this.value.replace(`![${$file._name}](${pos})`,`![${$file._name}](${res.data})`)\n                    }\n                })\n                .catch(e => {\n                    console.log(e)\n                })\n        },\n    },\n    activated () {\n        this.value = ''\n        if (this.articles[this.$route.params.article_id] && this.articles[this.$route.params.article_id].length > 0) {\n            this.value = this.articles[this.$route.params.article_id]\n            this.$emit('getArticle', this.info[this.$route.params.article_id])\n            return\n        }\n        if (this.status === 'readArticle') {\n            api.getArticleById({article_id: this.$route.params.article_id})\n                .then(res => {\n                    if (res.code) {\n                        this.value = res.data\n                        this.articles[this.$route.params.article_id] = res.data\n                    }\n                })\n                .catch(e => {\n                    console.log(e)\n                })\n        }\n        if (this.status === 'read') {\n            api.getArticleById({article_id: this.$route.params.article_id})\n                .then(res => {\n                    if (res.code) {\n                        let val = res.data.replace(/#.+\\n/, '')\n                        this.value = val\n                        this.articles[this.$route.params.article_id] = val\n                        this.info[this.$route.params.article_id] = res.info\n                        this.$emit('getArticle', res.info)\n                    }\n                })\n                .catch(e => {\n                    console.log(e)\n                })            \n        }\n    },\n\n}\n</script>\n<style lang=\"less\" scoped>\n    .readStyle {\n        min-height: 500px;\n        margin: 5px;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/Read.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mavon-editor',{staticClass:\"readStyle\",attrs:{\"toolbarsFlag\":_vm.toolbarsFlag,\"defaultOpen\":_vm.defaultOpen,\"editable\":_vm.editable,\"subfield\":false,\"navigation\":_vm.navigation,\"toolbars\":_vm.toolbars,\"boxShadow\":_vm.boxShadow},on:{\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a84f7ea\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!../node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/Read.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a84f7ea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Read.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Read.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Read.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a84f7ea\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Read.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a84f7ea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/Read.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}