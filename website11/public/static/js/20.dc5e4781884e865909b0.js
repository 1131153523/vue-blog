webpackJsonp([20],{"63U8":function(e,t){},JtNw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("T4f3"),r=s.n(o),i=s("aKwh"),a=s("gyMJ"),l={data:function(){var e=this;return{ruleForm:{prepass:"",pass:"",checkPass:""},rules:{prepass:[{validator:function(e,t,s){if(""!==t){var o={username:sessionStorage.getItem("username"),prepass:t,token:sessionStorage.getItem("token")};a.a.checkPrepass(o).then(function(e){0===e.code?s(e.msg):s()}).catch(function(e){console.log(e)})}else s(new Error("原密码不能为空"))},trigger:"blur"}],pass:[{validator:function(t,s,o){""===s?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},trigger:"blur"}],checkPass:[{validator:function(t,s,o){""===s?o(new Error("请再次输入密码")):s!==e.ruleForm.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]}}},computed:r()({},Object(i.c)(["resInfo"]),{resInfo:function(){return this.$store.state.resInfo}}),methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var s={username:sessionStorage.getItem("username"),token:sessionStorage.getItem("token"),password:t.ruleForm.checkPass};a.a.postChangePass(s).then(function(e){console.log(e),e.code?(t.$message({showClose:!0,message:e.msg,type:"success"}),t.$emit("isVisible",!1)):(t.$message({showClose:!0,message:e.msg,type:"error"}),t.$emit("isVisible",!0))}).catch(function(e){console.log(e)})})},resetForm:function(e){this.$refs[e].resetFields()}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"changePwd"},[s("div",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"0"}},[s("el-form-item",{attrs:{label:"",prop:"prepass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"原密码"},model:{value:e.ruleForm.prepass,callback:function(t){e.$set(e.ruleForm,"prepass",t)},expression:"ruleForm.prepass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"",prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"新密码"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"确认密码"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),s("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]};var c=s("/4AN")(l,n,!1,function(e){s("QmAe")},"data-v-1e593f8e",null).exports,u={data:function(){return{logout:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),this.$router.push({path:"/login"})},dialogVisible:!1}},computed:r()({},Object(i.c)(["isCollapse","username","headColor"]),{Color:{get:function(){return this.$store.state.headColor},set:function(e){this.$store.commit("CHANGE_HEAD_COLOR",e)}}}),methods:r()({},Object(i.b)(["CHANGE_COLLAPSE"]),{isVisible:function(e){this.dialogVisible=e}}),components:{ChangePwd:c}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header",style:{background:e.Color}},[s("div",[s("div",{staticClass:"header-left"},[e._v("\n                \n            "),s("div",{staticClass:"switch"},[e.isCollapse?s("i",{staticClass:"el-icon-arrow-left",on:{click:e.CHANGE_COLLAPSE}}):s("i",{staticClass:"el-icon-arrow-right",on:{click:e.CHANGE_COLLAPSE}})]),e._v(" "),s("div",{staticClass:"logo"},[e._v("\n                VueAdmin\n            ")])]),e._v(" "),s("div",{staticClass:"userInfo"},[s("div",{staticClass:"chooseColor",staticStyle:{position:"relative"}},[s("el-color-picker",{staticStyle:{opacity:"0","z-index":"11111"},model:{value:e.Color,callback:function(t){e.Color=t},expression:"Color"}}),e._v(" "),s("el-button",{staticStyle:{position:"absolute",top:"0",left:"0","font-size":"20px","vertical-align":"middle"},style:{background:e.headColor,borderColor:e.headColor},attrs:{type:"primary",icon:"el-icon-edit",circle:""}})],1),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"submenu"},[s("el-dropdown",{attrs:{trigger:"click"}},[s("span",{staticClass:"el-dropdown-link"},[e._v("\n                        "+e._s(e.username)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{staticStyle:{"z-index":"6000!important"},attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改密码")])],1),e._v(" "),s("el-dropdown-item",[s("a",{on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("退出")])])],1)],1)],1)]),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,width:"50%",modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("ChangePwd",{on:{isVisible:e.isVisible}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"avator"},[t("img",{attrs:{src:"http://img1.2345.com/duoteimg/zixunImg/local/2017/04/05/14913777692508.jpg",alt:""}})])}]};var d=s("/4AN")(u,m,!1,function(e){s("63U8")},"data-v-57126cf2",null);t.default=d.exports},QmAe:function(e,t){}});
//# sourceMappingURL=20.dc5e4781884e865909b0.js.map